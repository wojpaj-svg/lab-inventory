<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Characterization Lab Inventory</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #ffffff;
      color: #222;
      text-align: center;
    }

    header {
      background: #0b8a2e; /* zielony */
      color: #fff;
      padding: 18px 10px;
      font-size: 1.4rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    main {
      max-width: 500px;
      margin: 30px auto 40px;
      padding: 0 16px 40px;
    }

    .search-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      border: 2px solid #0b8a2e;
      border-radius: 10px;
      padding: 10px 14px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.08);
    }

    #search {
      flex: 1;
      border: none;
      outline: none;
      font-size: 1rem;
      padding: 6px 4px;
    }

    .results {
      margin-top: 24px;
      text-align: left;
    }

    .result-item {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px 14px;
      margin-bottom: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }

    .item-name {
      font-weight: 700;
      margin-bottom: 10px;
      border-bottom: 1px solid #eee;
      padding-bottom: 6px;
text-transform: capitalize;
      /* jeśli kiedyś zmienisz dane na normalny zapis,
         możesz tu dodać: text-transform: capitalize; */
    }

    .item-meta {
      display: flex;
      justify-content: flex-end;  /* LEWO / PRAWO */
      align-items: center;
      font-size: 0.9rem;
      color: #555;
gap: 6px;
    }

    .item-location {
      font-weight: 700;
      color: #0b8a2e; /* zielony */
    }

    .no-results {
      margin-top: 20px;
      color: #888;
      font-size: 0.95rem;
    }

    footer {
      margin-top: 30px;
      font-size: 0.8rem;
      color: #777;
    }
    .chips{
  margin-top: 14px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: flex-start;
}

.chip{
  border: 1px solid #0b8a2e;
  background: #fff;
  color: #0b8a2e;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.85rem;
  cursor: pointer;
  user-select: none;
}

.chip.active{
  background: #0b8a2e;
  color: #fff;
}
.location-photo{
  width: 100%;
  border-radius: 10px;
  border: 1px solid #eee;
  margin: 8px 0 12px 0;
}
.location-group{
  margin-bottom: 18px;
}

.location-header{
  font-weight: 800;
  color: #0b8a2e;
  margin: 10px 0 6px 0;
  padding-bottom: 4px;
  border-bottom: 2px solid #0b8a2e;
  font-size: 0.95rem;
}

.location-items{
  padding-left: 6px;
}
.location-topbar{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin: 10px 0 6px 0;
  padding-bottom: 6px;
  border-bottom: 2px solid #0b8a2e;
}

.location-code{
  font-weight: 900;
  color: #0b8a2e;
  font-size: 1.1rem;
  letter-spacing: 0.02em;
}

.location-actions{
  display: flex;
  gap: 8px;
  align-items: center;
}

.btn{
  border: 1px solid #0b8a2e;
  background: #fff;
  color: #0b8a2e;
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 0.85rem;
  cursor: pointer;
}

.btn:active{ transform: translateY(1px); }

details.location-details{
  margin-top: 8px;
}

details.location-details summary{
  cursor: pointer;
  user-select: none;
  color: #0b8a2e;
  font-weight: 700;
  list-style: none;
}

details.location-details summary::-webkit-details-marker{
  display: none;
}

.details-grid{
  margin-top: 10px;
  display: grid;
  gap: 10px;
}

.details-caption{
  font-size: 0.85rem;
  color: #666;
  margin-top: 4px;
}

  </style>
</head>
<body>
  <header>
    CHARACTERIZATION LAB INVENTORY 
  </header>

  <main>
    <div class="search-wrapper">
      <input
        id="search"
        type="text"
        placeholder="Search item…"
        autocomplete="off"
      />
    </div>

    <div id="chips" class="chips"></div>
<div id="results" class="results"></div>

    <footer>• Developed with Viviana • Designed by WP •</footer>
  </main>

  <script>
    /* ===== DANE ===== */
    const data = [
      { name: "PLASTIC BOXES 13 L ", location: "GCLS1" },
      { name: "PLASTIC LIDS SMALL", location: "GCLS7" },
      { name: "PLASTIC LIDS MEDIUM ", location: "GCLS7" },
      { name: "PLASTIC LIDS LARGE ", location: "GCLS7" },
      { name: "GLASS REAGENT BOTTLE WITH STOPPER ", location: "GCLS8" },
      { name: "GLASS BOTTLE BE LIFE", location: "GCLS8" },
      { name: "GLASS BOTTLES 500 ML ", location: "GCLS8" },
      { name: "FINNPIPETTE IN BOX", location: "GCLS9" },
      { name: "MULTIPIPETTE M4 IN BOX", location: "GCLS9" },
      { name: "BOX COMBITIPS ADVANCED ", location: "GCLS9" },
      { name: "MEDICAL FACE MASK 50PCS", location: "GCLS9" },
      { name: "PIPETTE TIPS 0.5-10ML", location: "GCLS9" },
      { name: "VISCOTIP 10 ML ", location: "GCLS9" },
      { name: "PLASTIC BOX 18 L", location: "GCLS9" },
      { name: "PLASTIC BOX 4.6L WITH LIDS ", location: "GCLS9" },
      { name: "BOX PIPETTE 0.1-2.5 µL", location: "GCLS9" },
      { name: "BOX PIPETTE 2-20  µl", location: "GCLS9" },
      { name: "BOX PIPETTE 20-200  µl", location: "GCLS9" },
      { name: "BOX PIPETTE 100-1000  µl", location: "GCLS9" },
      { name: "BOX PIPETTE 0.5-5 ML", location: "GCLS9" },
      { name: "BOX PIPETTE 1-10 Ml", location: "GCLS9" },
      { name: "BOX MULTIPIPETTE M4 STARTER KIT", location: "GCLS9" },
      { name: "WATER QUALITY TESTER", location: "IRD8" },
      { name: "PH ELECTRODE BOX + FILLING SOLUTION ", location: "IRD8" },
      { name: "PH TEST STRIPS pH 0.0-1.8", location: "IRD8" },
      { name: "PH TEST STRIPS pH 0.0-6.0", location: "IRD8" },
      { name: "PH TEST STRIPS pH 3.8-5.5", location: "IRD8" },
      { name: "PH TEST STRIPS pH 6.0-8.1", location: "IRD8" },
      { name: "PH TEST STRIPS pH 7.0-14.0", location: "IRD8" }
    ];

    const searchInput = document.getElementById("search");
    const resultsDiv  = document.getElementById("results");
    const chipsDiv = document.getElementById("chips");
let activePrefix = ""; // np. "GCLS", "IRD", "ILC" (puste = ALL)


    function normalize(text) {
      return text ? text.toString().toLowerCase().trim() : "";
    }
   function getPrefix(locationCode) {
  const loc = (locationCode || "").toString().toUpperCase().trim();
  const m = loc.match(/^[A-Z]+/);
  return m ? m[0] : "";
}

function renderChips(matches) {
  chipsDiv.innerHTML = "";

  if (!matches || matches.length === 0) return;

  // zlicz prefiksy
  const counts = {};
  matches.forEach(item => {
    const p = getPrefix(item.location);
    if (!p) return;
    counts[p] = (counts[p] || 0) + 1;
  });

  // zrób listę posortowaną malejąco po liczbie
  const entries = Object.entries(counts).sort((a,b) => b[1] - a[1]);

  // ALL chip
  const allChip = document.createElement("div");
  allChip.className = "chip" + (activePrefix === "" ? " active" : "");
  allChip.textContent = "All";
  allChip.addEventListener("click", () => {
    activePrefix = "";
    search(); // przerysuj
  });
  chipsDiv.appendChild(allChip);

  // prefix chips
  entries.forEach(([p, n]) => {
    const chip = document.createElement("div");
    chip.className = "chip" + (activePrefix === p ? " active" : "");
    chip.textContent = `${p} (${n})`;
    chip.addEventListener("click", () => {
      activePrefix = p;
      search();
    });
    chipsDiv.appendChild(chip);
  });
}

    function getMapForLocation(loc){
  const prefix = getPrefix(loc); // masz już tę funkcję
  const maps = {
    "GCLS": "assets/maps/GCLS.jpg",
    "IRD": "assets/maps/IRD.jpg",
    "ILC": "assets/maps/ILC.jpg",
    "MLD": "assets/maps/MLD.jpg",
    "SLC": "assets/maps/SLC.jpg",
    "SLUC": "assets/maps/SLUC.jpg",
    "HHC": "assets/maps/HHC.jpg",
    "HHD": "assets/maps/HHD.jpg"
  };
  return maps[prefix] || "";
}


    function search() {
      const q = normalize(searchInput.value);
      resultsDiv.innerHTML = "";

     if (!q) {
  activePrefix = ""; // reset
  chipsDiv.innerHTML = "";
  resultsDiv.innerHTML =
    '<div class="no-results">Start typing to search…</div>';
  return;
}


      let matches = data.filter(item =>
  normalize(item.name).includes(q) ||
  normalize(item.location).includes(q)
);

// jeśli wybrany chip (prefiks), przefiltruj
if (activePrefix) {
  matches = matches.filter(item => getPrefix(item.location) === activePrefix);
}


     if (matches.length === 0) {
  chipsDiv.innerHTML = "";
  resultsDiv.innerHTML =
    '<div class="no-results">No items found for this query.</div>';
  return;
}
renderChips(matches);


   // ===== GROUP + PHOTO PER LOCATION =====
const groups = {};
matches.forEach(item => {
  const loc = (item.location || "UNKNOWN").toString().trim();
  if (!groups[loc]) groups[loc] = [];
  groups[loc].push(item);
});

// sort lokacji alfabetycznie
Object.keys(groups).sort().forEach(loc => {
  const groupDiv = document.createElement("div");
  groupDiv.className = "location-group";

 // TOPBAR: po lewej label, po prawej duży kod + Copy
const topbar = document.createElement("div");
topbar.className = "location-topbar";

const left = document.createElement("div");
left.innerHTML = `<span style="font-weight:700;color:#555;">Contents</span>`;

const right = document.createElement("div");
right.className = "location-code";
right.textContent = loc;

topbar.appendChild(left);
topbar.appendChild(right);
groupDiv.appendChild(topbar);




  // lista itemów w lokacji
  const itemsDiv = document.createElement("div");
  itemsDiv.className = "location-items";

  groups[loc].forEach(item => {
    const itemDiv = document.createElement("div");
    itemDiv.className = "result-item";
    itemDiv.innerHTML = `<div class="item-name">${item.name}</div>`;
    itemsDiv.appendChild(itemDiv);
  });

  // DETAILS (zdjęcie dopiero po kliknięciu)
const details = document.createElement("details");
details.className = "location-details";

const summary = document.createElement("summary");
summary.textContent = "Show photos & lab map";

details.appendChild(summary);

const detailsGrid = document.createElement("div");
detailsGrid.className = "details-grid";

// zdjęcie szuflady/lokacji
const imgPath = `assets/locations/${loc}.jpg`;
const img = document.createElement("img");
img.className = "location-photo";
img.src = imgPath;
img.alt = loc;
img.loading = "lazy";
img.onerror = () => { img.remove(); };

detailsGrid.appendChild(img);
  const cap1 = document.createElement("div");
cap1.className = "details-caption";
cap1.textContent = "Location photo";
detailsGrid.appendChild(cap1);


// (opcjonalnie) plan labu / mapa strefy
const mapPath = getMapForLocation(loc); // funkcja niżej
if (mapPath) {
  const mapImg = document.createElement("img");
  mapImg.className = "location-photo";
  mapImg.src = mapPath;
  mapImg.alt = `Map for ${loc}`;
  mapImg.loading = "lazy";
  mapImg.onerror = () => { mapImg.remove(); };
  detailsGrid.appendChild(mapImg);
}

groupDiv.appendChild(itemsDiv);
groupDiv.appendChild(details);
resultsDiv.appendChild(groupDiv);

});

    }

    // live search
    searchInput.addEventListener("input", search);

    // tekst startowy
    resultsDiv.innerHTML =
      '<div class="no-results">Start typing to search…</div>';
  </script>
</body>
</html>





